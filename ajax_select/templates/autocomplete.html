{% load i18n %}
<input type="text" name="{{name}}" id="{{html_id}}" value="{{current_name}}" {{ extra_attrs }} />
{% block help %}{# {% if help_text %}<p class="help">{{ help_text }}</p>{% endif %} #}{% endblock %}
<script type="text/javascript">
//<![CDATA[
{% if "__prefix__" in html_id %}
    dynamicAddAutocomplete("{{html_id}}", function(html_id) {
        $("#"+html_id).autocomplete({
            minLength: {{min_length}},
            source: '{{lookup_url}}',
            select: function(event, ui) {
                $("#"+html_id).val(ui.item.label);
                $("#"+html_id).trigger("added");
                return false;
            }
        }).autocompletehtml();
    });
{% else %}
    $("#{{html_id}}").autocomplete({
        minLength: {{min_length}},
        source: '{{lookup_url}}',
        select: function(event, ui) {
            $("#{{html_id}}").val(ui.item.label);
            $("#{{html_id}}").trigger("added");
            return false;
        }
    }).autocompletehtml();
{% endif %}
{% block extra_script %}{% endblock %}
//]]>
</script>
